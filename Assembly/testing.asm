lorom

; x button hook
;----------------------------------------
; inside dungeon/room
org $0287FB
InsideDungeon_XButton:
JSL Dungeon_XButton_Hook
;----------------------------------------

org $0DBB67
Sound_SetSfxPanWithPlayerCoords:

org $0DBB8A
Sound_SetSfx3PanLong:


org $258000
;----------------------------------------
Dungeon_XButton_Hook:
    LDA $F6 : AND.b #$40 : BEQ .xIsNotPressed 
    ; x pressed code 
		LDA.b #$0F : JSL Sound_SetSfx3PanLong
    ; 0A is start up chime
    ; 0F is chest item get sound

    .xIsNotPressed
    LDA #$00
    RTL
;----------------------------------------

org $8888
Sound_LoadSongBank:
org $8900 ; change Sound_LoadSongBank to be JSL able
RTL

org $890D ; change Sound_LoadIntroSongBank to JSL to Sound_LoadSongBank
    JSL NewLoadSoundBank_Intro

org $891F ; 
    JSL NewLoadSoundBank

org $23F000
NewLoadSoundBank_Intro:
    ; restore
    SEI
    JSL Sound_LoadSongBank ; change to be JSL
RTL

NewLoadSoundBank:
    ; restore
    SEI
    JSL Sound_LoadSongBank ; change to be JSL
RTL

OnInitFileSelect:
{
    SEI
    ; Shut down NMI until music loads
    STZ $4200
    
    ; Stop all HDMA
    STZ $420C
    
    STZ $0136
    
    LDA.b #$FF : STA $2140

    ; new code
    ; load up our new instrument and sample incbin
    LDA.b #$00 : STA $00
    LDA.b #$80 : STA $01
    LDA.b #$26 : STA $02
    JSL Sound_LoadSongBank
    CLI

    LDA.b #$81 : STA $4200

    JSL $00893D;Restore the previous code
    RTL
}

; TODO: move this to main hooks
org $0CCD9D
JSL OnInitFileSelect



; sound fx 3, #$0F background note
org $1A8D58
db $00

; sound fx 3, #$0F background note #2? not sure what this does exactly
org $1A8D97
db $00

; 0xD1869
org $1A9869 ; sound fx 3, #$0F tracker data
; original is E0 0B 10 78 B9 BA BB 60 BC 00
db $E0, $19 ; set instrument $0B
db $7f ; length
;db $ed, $e0
db $97 ; note to play
db $00 ; end


; sample 19 - FFFF FFFF in vanila
org $198068
db $88, $31, $FC, $38

; sfx instrument 19
org $268000
db $09, $00, $E1, $3E
; Format: 9 bytes per sample instrument.
; Byte 0: Left volume
; Byte 1: Right volume
; Byte 2: Starting pitch 1
; Byte 3: Starting pitch 2
; Byte 4: Sample (SRCN) number
; Byte 5: ADSR 1 / GAIN
; Byte 6: ADSR 2
; Byte 7: GAIN
; Byte 8: Tuning
db $7F, $7F, $00, $00, $19, $FF, $F0, $70, $04
; what.brr ; 774bytes -> ARAM $3188
db $74, $07, $88, $31
incbin what4.brr
db $00, $00, $00, $08



; turn off the music (vol = 0)
org $1AB73B
db $00
org $1AB75B
db $00
org $1B90F8
db $00
org $1BA710
db $00
org $1BA7A4
db $00
org $1BA7BB
db $00
org $1BA7D2
db $00
org $1AD954
db $00
org $1AE53B
db $00
org $1BA736
db $00
org $1BA752
db $00
org $1BA772
db $00
org $1BA792
db $00
org $1ADB47
db $00
org $1ADB5E
db $00
org $1AC306
db $00
org $1AE878
db $00
org $1AE883
db $00
org $1AEE48
db $00
org $1AEE76
db $00
org $1AEEFB
db $00
org $1AEF2D
db $00
org $1BA211
db $00
org $1BA35B
db $00
org $1BA37B
db $00
org $1BA38E
db $00
org $1BA39F
db $00
org $1BA5C3
db $00
org $1BA691
db $00
org $1BA6A8
db $00
org $1BA6DF
db $00
org $1AA349
db $00
org $1ABF45
db $00
org $1AC2EB
db $00
org $1AC8B9
db $00
org $1AC8FF
db $00
org $1AD43F
db $00
org $1AD817
db $00
org $1AD957
db $00
org $1ADACB
db $00
org $1ADAE8
db $00
org $1ADB4A
db $00
org $1BA5DE
db $00
org $1BA608
db $00
org $1BA635
db $00
org $1BA662
db $00
org $1BA71F
db $00
org $1BA7AF
db $00
org $1BA7C6
db $00
org $1BA7DD
db $00
org $1AAF00
db $00
org $1BA3D5
db $00
org $1AA49C
db $00
org $1AA4CD
db $00
org $1AAC09
db $00
org $1AAC53
db $00
org $1AACAF
db $00
org $1AACEB
db $00
org $1AAD91
db $00
org $1AAEE6
db $00
org $1AB8ED
db $00
org $1ABC91
db $00
org $1ABCD3
db $00
org $1ABCE8
db $00
org $1ABF0C
db $00
org $1ABF82
db $00
org $1AC05F
db $00
org $1AC139
db $00
org $1AC198
db $00
org $1AC1D5
db $00
org $1AC1F6
db $00
org $1AC22B
db $00
org $1AC270
db $00
org $1AC2B1
db $00
org $1AC334
db $00
org $1AC371
db $00
org $1AC3A6
db $00
org $1AC3DB
db $00
org $1AC41E
db $00
org $1AC597
db $00
org $1ACB3C
db $00
org $1ACBAB
db $00
org $1ACC03
db $00
org $1ACC53
db $00
org $1ACC7F
db $00
org $1ACD9C
db $00
org $1AD424
db $00
org $1AE5D2
db $00
org $1AE64F
db $00
org $1AE698
db $00
org $1AE6FF
db $00
org $1AE985
db $00
org $1AEC5C
db $00
org $1AEC6F
db $00
org $1AEC8E
db $00
org $1AECB4
db $00
org $1AED7D
db $00
org $1B827D
db $00
org $1B960C
db $00
org $1B9828
db $00
org $1BA233
db $00
org $1BA3A2
db $00
org $1BA49E
db $00
org $1BA72B
db $00
org $1BA745
db $00
org $1BA765
db $00
org $1BA785
db $00
org $1BABF6
db $00
org $1BAC0D
db $00
org $1BAEBE
db $00
org $1BAFAC
db $00
org $1B9A02
db $00
org $1B9BD6
db $00
org $1AA1CD
db $00
org $1AA279
db $00
org $1AAE66
db $00
org $1AAE70
db $00
org $1AAEAB
db $00
org $1ABB97
db $00
org $1ABBAC
db $00
org $1ABBE8
db $00
org $1ABC0D
db $00
org $1ABC39
db $00
org $1ABC68
db $00
org $1ABC9F
db $00
org $1ABCBC
db $00
org $1AC01E
db $00
org $1AC290
db $00
org $1AC43E
db $00
org $1AC56F
db $00
org $1AC7D3
db $00
org $1ACD43
db $00
org $1ACDCC
db $00
org $1ACEBA
db $00
org $1ACF0B
db $00
org $1ACFE5
db $00
org $1AD012
db $00
org $1AD4BC
db $00
org $1AD4D5
db $00
org $1AD4F0
db $00
org $1AD509
db $00
org $1AD7D8
db $00
org $1AD9B9
db $00
org $1ADA2F
db $00
org $1ADAEB
db $00
org $1ADE5E
db $00
org $1ADFE9
db $00
org $1AE58F
db $00
org $1AE74A
db $00
org $1AE827
db $00
org $1AE9D6
db $00
org $1AE9F5
db $00
org $1AEA05
db $00
org $1AEAE9
db $00
org $1AEDCF
db $00
org $1AEE20
db $00
org $1AEECB
db $00
org $1AF1D4
db $00
org $1AF1E6
db $00
org $1AF203
db $00
org $1AF21E
db $00
org $1B8724
db $00
org $1B8732
db $00
org $1B9652
db $00
org $1B9698
db $00
org $1B9CBC
db $00
org $1B9DC0
db $00
org $1B9E49
db $00
org $1BAA68
db $00
org $1BAA77
db $00
org $1BAA88
db $00
org $1BAA99
db $00
org $1BAF04
db $00
org $1A9D28
db $00
org $1A9D41
db $00
org $1A9D5C
db $00
org $1A9D77
db $00
org $1A9EEE
db $00
org $1AB11D
db $00
org $1AB1D1
db $00
org $1AC148
db $00
org $1AD543
db $00
org $1ADB6F
db $00
org $1AE5B3
db $00
org $1AE760
db $00
org $1AEB6B
db $00
org $1AEDF6
db $00
org $1AEE0D
db $00
org $1AF3A1
db $00
org $1B814C
db $00
org $1B825D
db $00
org $1B82BE
db $00
org $1B8340
db $00
org $1B8394
db $00
org $1B842C
db $00
org $1B8796
db $00
org $1B8903
db $00
org $1B892A
db $00
org $1B91E8
db $00
org $1B922B
db $00
org $1B92E0
db $00
org $1B937E
db $00
org $1B93C1
db $00
org $1BA958
db $00
org $1BA971
db $00
org $1BA98C
db $00
org $1BA9A7
db $00
org $1A9D92
db $00
org $1A9DBD
db $00
org $1A9DEB
db $00
org $1A9F5D
db $00
org $1A9F9F
db $00
org $1A9FBD
db $00
org $1A9FDC
db $00
org $1A9FEA
db $00
org $1AA0CA
db $00
org $1AA1BB
db $00
org $1AA2C9
db $00
org $1AA754
db $00
org $1AA84C
db $00
org $1AA866
db $00
org $1AA887
db $00
org $1AA8A0
db $00
org $1AA8BA
db $00
org $1AA8DB
db $00
org $1AA8F4
db $00
org $1AA93E
db $00
org $1AABF3
db $00
org $1AAC1F
db $00
org $1AAC69
db $00
org $1AACA1
db $00
org $1AACC5
db $00
org $1AAD05
db $00
org $1AAD73
db $00
org $1AADAF
db $00
org $1AAE3D
db $00
org $1AAF36
db $00
org $1AAF46
db $00
org $1AAF6F
db $00
org $1AAFCF
db $00
org $1AAFDF
db $00
org $1AB02B
db $00
org $1AB086
db $00
org $1AB099
db $00
org $1AB0A5
db $00
org $1AB0CD
db $00
org $1AB0F6
db $00
org $1AB154
db $00
org $1AB184
db $00
org $1AB33A
db $00
org $1AB3D9
db $00
org $1AB49F
db $00
org $1AB54A
db $00
org $1AB5E5
db $00
org $1AB624
db $00
org $1AB63C
db $00
org $1AB672
db $00
org $1AB691
db $00
org $1AB6B4
db $00
org $1AB6C6
db $00
org $1AB724
db $00
org $1AB767
db $00
org $1AB8CB
db $00
org $1ABB1D
db $00
org $1ABB2F
db $00
org $1ABB55
db $00
org $1ABB70
db $00
org $1ABB81
db $00
org $1ABBBF
db $00
org $1ABD34
db $00
org $1ABD55
db $00
org $1ABD6E
db $00
org $1ABDC6
db $00
org $1ABE04
db $00
org $1ABE38
db $00
org $1ABF65
db $00
org $1ABFA6
db $00
org $1AC04F
db $00
org $1AC087
db $00
org $1AC17A
db $00
org $1AC1A0
db $00
org $1AC25C
db $00
org $1AC319
db $00
org $1AC33C
db $00
org $1AC3EF
db $00
org $1AC40C
db $00
org $1AC452
db $00
org $1AC494
db $00
org $1AC4B5
db $00
org $1AC512
db $00
org $1AC5D1
db $00
org $1AC5EF
db $00
org $1AC682
db $00
org $1AC6C3
db $00
org $1AC83C
db $00
org $1AC848
db $00
org $1AC855
db $00
org $1AC862
db $00
org $1AC86F
db $00
org $1AC87C
db $00
org $1ACA1C
db $00
org $1ACA3B
db $00
org $1ACA60
db $00
org $1ACB27
db $00
org $1ACC7A
db $00
org $1ACD12
db $00
org $1ACD81
db $00
org $1ACE90
db $00
org $1ACED6
db $00
org $1ACEE2
db $00
org $1AD005
db $00
org $1AD02E
db $00
org $1AD03C
db $00
org $1AD081
db $00
org $1AD1B1
db $00
org $1AD1C7
db $00
org $1AD1CF
db $00
org $1AD1EF
db $00
org $1AD20C
db $00
org $1AD214
db $00
org $1AD231
db $00
org $1AD257
db $00
org $1AD26D
db $00
org $1AD275
db $00
org $1AD2AF
db $00
org $1AD2BD
db $00
org $1AD2CD
db $00
org $1AD2DB
db $00
org $1AD49C
db $00
org $1AD801
db $00
org $1AD8A4
db $00
org $1ADA68
db $00
org $1ADA7F
db $00
org $1ADC12
db $00
org $1ADD71
db $00
org $1ADE10
db $00
org $1ADE9A
db $00
org $1ADF8B
db $00
org $1ADFA4
db $00
org $1AE51A
db $00
org $1AE542
db $00
org $1AE5ED
db $00
org $1AE61D
db $00
org $1AE6D7
db $00
org $1AE776
db $00
org $1AE8BD
db $00
org $1AE8E5
db $00
org $1AE956
db $00
org $1AE973
db $00
org $1AE9A8
db $00
org $1AEA51
db $00
org $1AEA86
db $00
org $1AEB96
db $00
org $1AEC3E
db $00
org $1AED4A
db $00
org $1AEE9C
db $00
org $1AEF80
db $00
org $1AF17E
db $00
org $1AF190
db $00
org $1AF1B9
db $00
org $1B811D
db $00
org $1B8139
db $00
org $1B816B
db $00
org $1B818A
db $00
org $1B819E
db $00
org $1B81BE
db $00
org $1B829C
db $00
org $1B82E1
db $00
org $1B8306
db $00
org $1B830E
db $00
org $1B835E
db $00
org $1B83AB
db $00
org $1B83CA
db $00
org $1B83F0
db $00
org $1B83F8
db $00
org $1B844B
db $00
org $1B8479
db $00
org $1B849E
db $00
org $1B84CB
db $00
org $1B84EB
db $00
org $1B84F3
db $00
org $1B854A
db $00
org $1B8573
db $00
org $1B859D
db $00
org $1B85B4
db $00
org $1B85CE
db $00
org $1B862A
db $00
org $1B8681
db $00
org $1B87E3
db $00
org $1B87FF
db $00
org $1B887B
db $00
org $1B88C6
db $00
org $1B88E3
db $00
org $1B8944
db $00
org $1B897B
db $00
org $1B8C97
db $00
org $1B8CA4
db $00
org $1B8CB3
db $00
org $1B8CC2
db $00
org $1B8CD1
db $00
org $1B8D01
db $00
org $1B917B
db $00
org $1B918C
db $00
org $1B919A
db $00
org $1B91B5
db $00
org $1B91D0
db $00
org $1B91DD
db $00
org $1B9220
db $00
org $1B9273
db $00
org $1B9284
db $00
org $1B9292
db $00
org $1B92AD
db $00
org $1B92C8
db $00
org $1B92D5
db $00
org $1B9311
db $00
org $1B9322
db $00
org $1B9330
db $00
org $1B934B
db $00
org $1B9366
db $00
org $1B9373
db $00
org $1B93B6
db $00
org $1B97A6
db $00
org $1B97C2
db $00
org $1B97DC
db $00
org $1B97FB
db $00
org $1B9811
db $00
org $1B98FF
db $00
org $1B996F
db $00
org $1B99A8
db $00
org $1B99D5
db $00
org $1B9A30
db $00
org $1B9A4E
db $00
org $1B9A6B
db $00
org $1B9A88
db $00
org $1B9AF7
db $00
org $1B9B1D
db $00
org $1B9B43
db $00
org $1B9B7C
db $00
org $1B9BA9
db $00
org $1B9C84
db $00
org $1B9C8D
db $00
org $1B9CAC
db $00
org $1B9CE8
db $00
org $1B9CF3
db $00
org $1B9CFD
db $00
org $1B9D46
db $00
org $1BA35E
db $00
org $1BA37E
db $00
org $1BA391
db $00
org $1BA478
db $00
org $1BA4C3
db $00
org $1BA4D7
db $00
org $1BA4F6
db $00
org $1BA515
db $00
org $1BA6E2
db $00
org $1BA9C2
db $00
org $1BA9ED
db $00
org $1BAA1B
db $00
org $1BAA57
db $00
org $1BABAF
db $00
org $1BABC9
db $00
org $1BABE2
db $00
org $1BAC28
db $00
org $1BAC46
db $00
org $1BAC63
db $00
org $1BACB8
db $00
org $1BACEC
db $00
org $1BAD08
db $00
org $1BAD25
db $00
org $1BAD42
db $00
org $1BAD5F
db $00
org $1BAE17
db $00
org $1BAE34
db $00
org $1BAE51
db $00
org $1BAF2E
db $00
org $1BAF55
db $00
org $1BAF6B
db $00
org $1BAF81
db $00
org $1BB14F
db $00
org $1BB16B
db $00
org $1BB180
db $00
org $1BB195
db $00
org $1BB1AA
db $00
org $1AAB88
db $00
org $1AB64A
db $00
org $1AB69F
db $00
org $1AB747
db $00
org $1AA13F
db $00
org $1AA174
db $00
org $1AA29E
db $00
org $1AA426
db $00
org $1AC731
db $00
org $1AC753
db $00
org $1AC774
db $00
org $1AC795
db $00
org $1AC7B6
db $00
org $1ACAA5
db $00
org $1ACAE4
db $00
org $1ACB96
db $00
org $1ACCA5
db $00
org $1AD477
db $00
org $1ADA3D
db $00
org $1AE566
db $00
org $1AE72C
db $00
org $1AE7C0
db $00
org $1AE9B8
db $00
org $1AEAB1
db $00
org $1AEC05
db $00
org $1AEDB3
db $00
org $1AF1AB
db $00
org $1B8E2D
db $00
org $1B8F0D
db $00
org $1B94E0
db $00
org $1B9544
db $00
org $1B95A8
db $00
org $1B9982
db $00
org $1B9B56
db $00
org $1BA694
db $00
org $1BA6AB
db $00
org $1BAE88
db $00
org $1BAEC8
db $00
org $1BAEE6
db $00
org $1BB1BF
db $00
org $1AA10A
db $00
org $1AA2DC
db $00
org $1AA447
db $00
org $1ADA4D
db $00
org $1ADDDC
db $00
org $1BA251
db $00
org $1BA26C
db $00
org $1B945E
db $00
org $1B967D
db $00
org $1B96C2
db $00
org $1B9C95
db $00
org $1B9EE6
db $00
org $1BA5C6
db $00
org $1AA047
db $00
org $1AA4C2
db $00
org $1AA4EC
db $00
org $1AA5A4
db $00
org $1ABDAA
db $00
org $1AD1A8
db $00
org $1AD1E6
db $00
org $1AD24E
db $00
org $1AD29E
db $00
org $1AE045
db $00
org $1B81DE
db $00
org $1B821E
db $00
org $1B94AA
db $00
org $1B9A9E
db $00
org $1B9AE4
db $00
org $1BA289
db $00
org $1AA085
db $00
org $1AA1C5
db $00
org $1ADF28
db $00
